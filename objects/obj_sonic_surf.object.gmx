<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_hsz_surf</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>ctr_indestructible</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// initialize movement mechanics
hmspd=6; // maxium speed
vmspd=1.5; // maxium speed
hspd=par_character.hspeed; // current direction player is moving (-1 left, 0 none, 1 right)
accl=.250; // the ammount per step to increment speed by until maximum is reached
hdir=0; // current horizontal direction player is moving
vspd=0; // current direction player is moving (-1 left, 0 none, 1 right)
vaccl=.05; // the ammount per step to increment speed by until maximum is reached
vdir=0; // current horizontal direction player is moving
fric=.1; // how fast to come to a hault
hspeed=image_xscale*4
hit = false
bouncespeed=3
image_speed=0.2
triggered=false;
canbetriggered=true;
dead=false
alarm[10]=60
over=false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>par_character.surf=false
par_character.depth=0
par_character.input_lock_l=0
par_character.input_lock_r=0
par_character.state=CS_DEFAULT;
par_character.ground=false;
par_character.x_speed=4*par_character.animation_direction
ctr_camera.limit_bottom = room_height;
surf=instance_create(x,y,obj_hsz_surf)
surf.use=false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>par_character.invincibility=0
image_angle=0
hit=false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with instance_create(x-(48*image_xscale),y+(18*image_yscale),obj_surf_wave){
image_xscale=obj_sonic_surf.image_xscale
}

if dead=false{alarm[10]=15}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var sea = obj_surf_sea
y=clamp(y,sea.y,sea.y+sea.sprite_height-32)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if dead=false{hspeed=image_xscale*4
audio_play(_general_water,global.sfx_volume)}

up=-keyboard_check(vk_up);
down=keyboard_check(vk_down);
vdir=(up+down); // get the key dir
if(vdir==0){  // if player is not pressing any buttons
  vspd=vspeed; // update hspd so it matches when player is moving
  friction=fric; // apply friction
}else{ // otherwise
  friction=0; // turn off friction
  vspd=median(-vmspd,vmspd, vspd+vdir*vaccl); // calculate the speed
  vspeed=vspd;}

if hspeed&gt;0{image_xscale=1}else if hspeed&lt;0{image_xscale=-1}

if hit=true{
    hmspd=2;
    vmspd=0.5;

}  
else{
    hmspd=6;
    vmspd=1.5
}

if(place_meeting(x+hspd, y+vspd,par_hurt_indestructible)){
   vspd = -sign(vspd)*bouncespeed;
   hspd = -sign(hspd)*bouncespeed;
}

if(place_meeting(x, y,par_hurt_indestructible)){
   
       if hit=false
       {
        hit=true
        alarm[11]=90
        
        with par_character
        {
                  if(global.crings &gt; 0 || shield_index != 0)
                  {

                        invincibility       =  1;
                        invincibility_timer = -1;   
                        
                        audio_play(_char_hurt, global.sfx_volume);  
                                                
                     // Ring Drop:
                       if(shield_index == 0)
                       {
                       if is_cpu=false
                       {
                            audio_play(_char_lose_rings, global.sfx_volume);   
                            rings_total = clamp(global.crings,0,4)
                            rings_angle = 101.25;
                            rings_speed = 4;    
                                
                           while(rings_total)
                            {   
                                ring = instance_create(x, y, obj_ring);
                                ring.timer   = 720;    
                                ring.y_speed = -dsin(round(rings_angle))*rings_speed;
                                ring.x_speed =  dcos(round(rings_angle))*rings_speed;
                                ring.motion  =  true;
                                if(rings_total mod 2 != 0)
                                {
                                    rings_angle  += 22.5;
                                    ring.x_speed *= -1;
                                }   
                                rings_total -= 1;
                                if(rings_total == 16)
                                {
                                    rings_speed = 2;
                                    rings_angle = 101.25;
                                }
                            }
                            
                            if global.crings&gt;4{global.crings-=4}
                            else{global.crings=0}
                            
                          }
                       }
                       else
                       {
                          with(shield_object)
                          {
                               instance_destroy();
                          }
                          shield_object = noone;
                          shield_index  = 0;
                       }            
                  }
                  else
                  {
                     state = CS_DEATH;
                     obj_sonic_surf.dead=true
                  }
            }
        }
    }

if y&lt;instance_nearest(x,y,obj_surf_rock).y-16{
    depth=1
}
else{
    depth=-1
}

if dead=false{
par_character.x=floor(x)
par_character.y=floor(y);
par_character.x_speed=0;
par_character.y_speed=0;
par_character.input_lock_l=1
par_character.input_lock_r=1
par_character.depth=depth-1
if par_character.state!=CS_HANG{
par_character.state=CS_HANG
par_character.hang="SLIDE2"
par_character.surf=true
ctr_camera.limit_bottom=obj_surf_sea.y+obj_surf_sea.sprite_height
}}

if place_meeting(x,y,obj_surfing_ground){
if obj_surfing_ground.end_s=true{
instance_destroy()}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
